jQuery(function($){if(typeof ops_country_select_params==='undefined'){return false}var d=ops_country_select_params.countries.replace(/&quot;/g,'"'),states=$.parseJSON(d),selectors='select.country_to_state, input.country_to_state';$('#one-page-shopping-checkout').on('change',selectors,function(){var a=$(this).val(),$statebox=$(this).closest('div').find('#billing_state, #shipping_state, #calc_shipping_state'),$parent=$statebox.parent(),input_name=$statebox.attr('name'),input_id=$statebox.attr('id'),value=$statebox.val(),placeholder=$statebox.attr('placeholder');if(states[a]){if(states[a].length===0){$statebox.parent().hide().find('.chosen-container').remove();$statebox.replaceWith('<input type="hidden" class="hidden" name="'+input_name+'" id="'+input_id+'" value="" placeholder="'+placeholder+'" />');$('body').trigger('country_to_state_changed',[a,$(this).closest('div')])}else{var b='',state=states[a];for(var c in state){if(state.hasOwnProperty(c)){b=b+'<option value="'+c+'">'+state[c]+'</option>'}}$statebox.parent().show();if($statebox.is('input')){$statebox.replaceWith('<select name="'+input_name+'" id="'+input_id+'" class="state_select" placeholder="'+placeholder+'"></select>');$statebox=$(this).closest('div').find('#billing_state, #shipping_state, #calc_shipping_state')}$statebox.html('<option value="">'+ops_country_select_params.i18n_select_state_text+'</option>'+b);$statebox.val(value);$('body').trigger('country_to_state_changed',[a,$(this).closest('div')])}}else{if($statebox.is('select')){$parent.show().find('.chosen-container').remove();$statebox.replaceWith('<input type="text" class="input-text" name="'+input_name+'" id="'+input_id+'" placeholder="'+placeholder+'" />');$('body').trigger('country_to_state_changed',[a,$(this).closest('div')])}else if($statebox.is('.hidden')){$parent.show().find('.chosen-container').remove();$statebox.replaceWith('<input type="text" class="input-text" name="'+input_name+'" id="'+input_id+'" placeholder="'+placeholder+'" />');$('body').trigger('country_to_state_changed',[a,$(this).closest('div')])}}$('body').trigger('country_to_state_changing',[a,$(this).closest('div')])});$(selectors).change()});