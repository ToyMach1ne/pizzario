jQuery(document).ready(function(a){"use strict";function b(){"use strcit";a("body").find("form:not(.in_loop).cart").each(function(){a(this).init_yith_wapo_totals(),a(this).find(".variations select").change()}),a("body").find(".ywapo_option_description").each(function(){var b=a(this).data("tooltip");b&&c(a(this),b)}),a(".ywapo_input_container_color .wp-color-picker").wpColorPicker({change:function(b,c){var d=a(this).closest(".ywapo_input_container_color"),e=d.find("input.ywapo_input_color");e.val(c.color.toString()),e.change()},clear:function(){var b=a(this).closest(".ywapo_input_container_color"),c=b.find("input.ywapo_input_color");c.val(""),c.change()}}),a(".ywapo_datepicker").each(function(){a(this).datepicker()})}function c(b,c){"use strcit";var d=a('<span class="yith_wccl_tooltip"></span>'),e=yith_wapo_general.tooltip_pos+" "+yith_wapo_general.tooltip_ani;d.addClass(e),b.append(d.html("<span>"+c+"</span>"))}return"undefined"!=typeof yith_wapo_general&&(a.fn.init_yith_wapo_totals=function(){function b(b){"use strcit";var c=a(".yith_wapo_groups_container");if("undefined"!=typeof c){var f=c.find("input.ywapo_input.ywapo_price_percentage, select.ywapo_input option.ywapo_price_percentage, textarea.ywapo_input.ywapo_price_percentage"),g=0;f.each(function(){var h=a(this);if("undefined"!=typeof h.data("pricetype")&&"fixed"!=h.data("pricetype")){var i=h.closest(".ywapo_input_container");a.ajax({url:yith_wapo_general.wc_ajax_url.toString().replace("%%endpoint%%","yith_wapo_update_variation_price"),type:"POST",data:{variation_id:b.variation_id,variation_price:b.display_price,type_id:h.data("typeid"),option_index:h.data("index")},beforeSend:function(){0==g&&d(c)},success:function(b){if(!b.error&&""!=b){h.attr("data-price",b);var d=l(parseFloat(b));if(i.find("span.amount").html(d),""!=h.text()){var j=h.text().split("+");if(j.length>0){j=j[0]+" + "+d,h.addClass("ywapo_option_price_chaged");var k=h.closest(".ywapo_group_container"),m=k.find("select"),n=m.attr("sb");if("undefined"!=typeof n){var o=h.data("index"),p=a(a("#sbOptions_"+n).find("li").get(parseInt(o)+1)).find("a");p.html(j)}}h.html(j)}g++,g==f.length&&e(c)}}})}})}}function c(b){var c=!0;return b.find(".ywapo_group_container").each(function(){var b=a(this);if("undefined"!=typeof b&&!b.hasClass("ywapo_conditional_hidden")){var d=b.data("type"),e="1"==b.data("requested"),f=!0;switch(d){case"text":case"textarea":case"number":case"file":case"date":case"range":b.find("input.ywapo_input, textarea.ywapo_input").each(function(){return""==a(this).val()&&"required"==a(this).attr("required")?(e=!0,void(f=!1)):""==a(this).val()?void(f=!1):void 0});break;case"color":b.find("input.ywapo_input_color").each(function(){if(""==a(this).val())return void(f=!1)});break;case"select":f=""!=b.find("select.ywapo_input").val();break;case"labels":f=b.find(".ywapo_input_container_labels.ywapo_selected").length>0;break;case"checkbox":if(e){var g=b.find(".ywapo_input").length,h=b.find(".ywapo_input:checked").length;f=g>0&&g==h}else b.find(".ywapo_input").each(function(){if(!a(this).is(":checked")&&"required"==a(this).attr("required"))return e=!0,void(f=!1)});break;case"radio":f=!1,b.find("input.ywapo_input").each(function(){if(a(this).is(":checked"))return void(f=!0)})}if(e&&!f)return c=!1,void b.addClass("ywapo_miss_required");b.removeClass("ywapo_miss_required")}}),c||a("html, body").animate({scrollTop:a("#yith_wapo_groups_container").offset().top},2e3),c}function d(a){"use strcit";a.block({message:"",overlayCSS:{backgroundColor:"#fff",opacity:.6,cursor:"wait"}})}function e(a){"use strcit";a.unblock()}function f(b,c){var d=c.data("type"),e=!1;if("select"==d||"radio"==d)e=""!=b.val();else switch(d){case"checkbox":c.find('input[type="checkbox"].ywapo_input').each(function(){if(a(this).is(":checked"))return void(e=!0)});break;case"labels":var f=0;c.find('input[type="hidden"].ywapo_input').each(function(){if(""!=a(this).val())return f++,!0}),e=f>0;break;case"text":case"textarea":case"number":case"file":case"color":case"date":case"range":c.find("input.ywapo_input").each(function(){if(""!=a(this).val())return void(e=!0)});break;case"textarea":c.find("textarea.ywapo_input").each(function(){if(""!=a(this).val())return void(e=!0)})}return e&&c.removeClass("ywapo_miss_required"),e}function g(b,c,d){"use strcit";var e=d.data("id");if("undefined"!=typeof e){var g=f(a(c),d);b.find(".ywapo_group_container").each(function(){var b=a(this).closest(".ywapo_group_container");if("undefined"!=typeof b){var c=b.data("id");if(e!=c){var d=b.data("condition");if(""!=d){d=d.toString().split(",");var f=j(d);if(f){if(!b.hasClass("ywapo_conditional_hidden"))return b.addClass("ywapo_conditional_hidden"),i(b),!0}else{var k=a.inArray(e.toString(),d);0==k&&(g?(b.removeClass("ywapo_conditional_hidden"),h(b)):(b.addClass("ywapo_conditional_hidden"),i(b)))}}}}})}}function h(b){"use strcit";b.find("input, select, textarea").each(function(){a(this).removeAttr("disabled"),a(this).change()})}function i(b){"use strcit";b.find("input, select, textarea").each(function(){a(this).attr("disabled","disabled")})}function j(b){var c=!1;return a(".yith_wapo_groups_container").find(".ywapo_group_container").each(function(){var d=a(this).data("id");if(0==a.inArray(d.toString(),b)&&a(this).hasClass("ywapo_conditional_hidden"))return void(c=!0)}),c}function k(b){var c=0;return b.find('.ywapo_input:checked, select.ywapo_input option:selected, input[type="text"].ywapo_input, input[type="number"].ywapo_input, input[type="file"].ywapo_input, input[type="color"].ywapo_input, input[type="date"].ywapo_input,input[type="hidden"].ywapo_input ,textarea.ywapo_input').each(function(){var b=a(this).closest(".ywapo_group_container");if("undefined"!=typeof b&&!b.hasClass("ywapo_conditional_hidden")){var d=b.data("type"),e=!1;switch(d){case"text":case"textarea":case"number":case"file":case"color":case"date":case"labels":""!=a(this).val().trim()&&(e=!0);break;default:e=!0}if(e){var f=a(this).data("price");"undefined"!=typeof f&&f>=0&&(c+=parseFloat(f))}}}),c}function l(a){var b=accounting.formatMoney(a,{symbol:yith_wapo_general.currency_format_symbol,decimal:yith_wapo_general.currency_format_decimal_sep,thousand:yith_wapo_general.currency_format_thousand_sep,precision:yith_wapo_general.currency_format_num_decimals,format:yith_wapo_general.currency_format});return b}a(this).on("change",".yith_wapo_groups_container input, .yith_wapo_groups_container select, .yith_wapo_groups_container textarea,  input.qty",function(b){var c=a(this);a(this).trigger("yith-wapo-product-option-conditional",c),a(this).trigger("yith-wapo-product-option-update")}),a(this).on("found_variation",function(c,d){var f=(a(this),a(".yith_wapo_group_total")),g=0;if("undefined"!=typeof d.display_price)g=d.display_price;else if(a(d.price_html).find(".amount:last").size()){a(".cart");g=a(d.price_html).find(".amount:last").text(),g=l(g)}f.data("product-price",g),b(d),a(this).trigger("yith-wapo-product-option-update")}),a(this).on("yith-wapo-product-option-update",function(){var b=a(this),c=a(".yith_wapo_group_total"),d=k(b);if(d>0){if(b.find("input.qty").size())var e=parseFloat(b.find("input.qty").val());else var e=1;d*=e;var f=a(".yith-wcpb-product-bundled-items"),g=b.find(".single_variation");"undefined"!=typeof g&&0==f.length&&g.after(c);var h=l(d),i=0,c=a(".yith_wapo_group_total"),j=parseFloat(c.data("product-price")),m=c.find(".yith_wapo_group_option_total span.price"),n=c.find(".yith_wapo_group_final_total span.price");m.html(h),i=j*e+d;var o=l(i);n.html(o),c.fadeIn()}else c.fadeOut()}),a(this).on("click",".ywapo_input_container.ywapo_input_container_labels",function(b){var c=a(this).find('input[type="hidden"]');if(""!=c.val())c.val(""),a(this).removeClass("ywapo_selected");else{var d=a(".ywapo_input_container.ywapo_input_container_labels");d.removeClass("ywapo_selected"),d.find('input[type="hidden"]').val(""),a(this).addClass("ywapo_selected"),c.val(c.data("index"))}a(this).trigger("yith-wapo-product-option-conditional",c),a(this).trigger("yith-wapo-product-option-update")}),a(this).on("yith-wapo-product-option-conditional",function(b,c){var d=a(c).closest(".ywapo_group_container");g(a(this),c,d)}),a(this).on("click",".single_add_to_cart_button",function(b){var d=a(this).closest("form.cart");return yith_wapo_general.do_submit=c(d),yith_wapo_general.do_submit}),a(document).on("yith_ywraq_action_before",function(){return m=a("form.cart"),yith_wapo_general.do_submit=c(m),yith_wapo_general.do_submit});var m=a(this);m.find(".yith_wapo_groups_container input, .yith_wapo_groups_container select, .yith_wapo_groups_container textarea").each(function(){m.trigger("yith-wapo-product-option-conditional",a(this))}),m.trigger("yith-wapo-product-option-update")},b(),void a(document).on("qv_loader_stop yit_quick_view_loaded",function(){b()}))});